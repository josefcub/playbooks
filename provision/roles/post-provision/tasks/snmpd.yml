---

    - name: install snmp package
      yum:
        name: net-snmp
        state: present

    - name: insert distro shell script
      copy:
        backup: true
        force: no
        mode: '0755'
        owner: 'root'
        group: 'root'
        src: distro
        dest: /usr/bin/distro

    - name: create override directory for snmpd
      file:
        path: /etc/systemd/system/snmpd.service.d
        mode: '0755'
        owner: 'root'
        group: 'root'
        state: directory

    - name: insert systemd override for snmpd
      notify: reload systemd config
      copy:
        backup: false
        force: no
        mode: '0644'
        owner: 'root'
        group: 'root'
        src: override.conf
        dest: /etc/systemd/system/snmpd.service.d/override.conf

    - name: insert snmpd configuration file
      notify: restart snmpd
      copy:
        backup: true
        force: yes
        mode: '0600'
        owner: 'root'
        group: 'root'
        src: snmpd.conf
        dest: /etc/snmp/snmpd.conf

